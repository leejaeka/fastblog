<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Recommendations with IBM 😺 | Jaekang AI</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Recommendations with IBM 😺" />
<meta name="author" content="Jaekang Lee" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Udacity project with IBM Watson Studio platform data" />
<meta property="og:description" content="Udacity project with IBM Watson Studio platform data" />
<link rel="canonical" href="https://leejaeka.github.io/jaekangai/python/collaborative%20recommendation/eda/ibm/svm/matrix%20factorization/udacity/2021/01/15/Recommendations.html" />
<meta property="og:url" content="https://leejaeka.github.io/jaekangai/python/collaborative%20recommendation/eda/ibm/svm/matrix%20factorization/udacity/2021/01/15/Recommendations.html" />
<meta property="og:site_name" content="Jaekang AI" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-15T00:00:00-06:00" />
<script type="application/ld+json">
{"url":"https://leejaeka.github.io/jaekangai/python/collaborative%20recommendation/eda/ibm/svm/matrix%20factorization/udacity/2021/01/15/Recommendations.html","@type":"BlogPosting","headline":"Recommendations with IBM 😺","dateModified":"2021-01-15T00:00:00-06:00","datePublished":"2021-01-15T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://leejaeka.github.io/jaekangai/python/collaborative%20recommendation/eda/ibm/svm/matrix%20factorization/udacity/2021/01/15/Recommendations.html"},"author":{"@type":"Person","name":"Jaekang Lee"},"description":"Udacity project with IBM Watson Studio platform data","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/jaekangai/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://leejaeka.github.io/jaekangai/feed.xml" title="Jaekang AI" /><link rel="shortcut icon" type="image/x-icon" href="/jaekangai/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/jaekangai/">Jaekang AI</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/jaekangai/about/">About Me</a><a class="page-link" href="/jaekangai/search/">Search</a><a class="page-link" href="/jaekangai/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Recommendations with IBM 😺</h1><p class="page-description">Udacity project with IBM Watson Studio platform data</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-01-15T00:00:00-06:00" itemprop="datePublished">
        Jan 15, 2021
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Jaekang Lee</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      17 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/jaekangai/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/jaekangai/categories/#collaborative recommendation">collaborative recommendation</a>
        &nbsp;
      
        <a class="category-tags-link" href="/jaekangai/categories/#EDA">EDA</a>
        &nbsp;
      
        <a class="category-tags-link" href="/jaekangai/categories/#IBM">IBM</a>
        &nbsp;
      
        <a class="category-tags-link" href="/jaekangai/categories/#SVM">SVM</a>
        &nbsp;
      
        <a class="category-tags-link" href="/jaekangai/categories/#Matrix Factorization">Matrix Factorization</a>
        &nbsp;
      
        <a class="category-tags-link" href="/jaekangai/categories/#Udacity">Udacity</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/leejaeka/jaekangai/tree/master/_notebooks/2021-01-15-Recommendations.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/jaekangai/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/leejaeka/jaekangai/master?filepath=_notebooks%2F2021-01-15-Recommendations.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/jaekangai/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/leejaeka/jaekangai/blob/master/_notebooks/2021-01-15-Recommendations.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/jaekangai/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#Part-I-:-Exploratory-Data-Analysis">Part I : Exploratory Data Analysis </a></li>
<li class="toc-entry toc-h3"><a href="#Part-II:-Rank-Based-Recommendations">Part II: Rank-Based Recommendations </a></li>
<li class="toc-entry toc-h3"><a href="#Part-III:-User-User-Based-Collaborative-Filtering">Part III: User-User Based Collaborative Filtering </a></li>
<li class="toc-entry toc-h3"><a href="#Part-IV:-Matrix-Factorization">Part IV: Matrix Factorization </a></li>
<li class="toc-entry toc-h2"><a href="#Conclusion">Conclusion </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-01-15-Recommendations.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">project_tests</span> <span class="k">as</span> <span class="nn">t</span>
<span class="kn">import</span> <span class="nn">pickle</span>

<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'data/user-item-interactions.csv'</span><span class="p">)</span>
<span class="n">df_content</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'data/articles_community.csv'</span><span class="p">)</span>
<span class="k">del</span> <span class="n">df</span><span class="p">[</span><span class="s1">'Unnamed: 0'</span><span class="p">]</span>
<span class="k">del</span> <span class="n">df_content</span><span class="p">[</span><span class="s1">'Unnamed: 0'</span><span class="p">]</span>

<span class="c1"># Show df to get an idea of the data</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>article_id</th>
      <th>title</th>
      <th>email</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1430.0</td>
      <td>using pixiedust for fast, flexible, and easier...</td>
      <td>ef5f11f77ba020cd36e1105a00ab868bbdbf7fe7</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1314.0</td>
      <td>healthcare python streaming application demo</td>
      <td>083cbdfa93c8444beaa4c5f5e0f5f9198e4f9e0b</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1429.0</td>
      <td>use deep learning for image classification</td>
      <td>b96a4f2e92d8572034b1e9b28f9ac673765cd074</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1338.0</td>
      <td>ml optimization using cognitive assistant</td>
      <td>06485706b34a5c9bf2a0ecdac41daf7e7654ceb7</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1276.0</td>
      <td>deploy your python model as a restful api</td>
      <td>f01220c46fc92c6e6b161b1849de11faacd7ccb2</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_content</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>doc_body</th>
      <th>doc_description</th>
      <th>doc_full_name</th>
      <th>doc_status</th>
      <th>article_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Skip navigation Sign in SearchLoading...\r\n\r...</td>
      <td>Detect bad readings in real time using Python ...</td>
      <td>Detect Malfunctioning IoT Sensors with Streami...</td>
      <td>Live</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>No Free Hunch Navigation * kaggle.com\r\n\r\n ...</td>
      <td>See the forest, see the trees. Here lies the c...</td>
      <td>Communicating data science: A guide to present...</td>
      <td>Live</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>☰ * Login\r\n * Sign Up\r\n\r\n * Learning Pat...</td>
      <td>Here’s this week’s news in Data Science and Bi...</td>
      <td>This Week in Data Science (April 18, 2017)</td>
      <td>Live</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>DATALAYER: HIGH THROUGHPUT, LOW LATENCY AT SCA...</td>
      <td>Learn how distributed DBs solve the problem of...</td>
      <td>DataLayer Conference: Boost the performance of...</td>
      <td>Live</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Skip navigation Sign in SearchLoading...\r\n\r...</td>
      <td>This video demonstrates the power of IBM DataS...</td>
      <td>Analyze NY Restaurant data using Spark in DSX</td>
      <td>Live</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Part-I-:-Exploratory-Data-Analysis">
<a class="anchor" href="#Part-I-:-Exploratory-Data-Analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a><a class="anchor" id="Exploratory-Data-Analysis">Part I : Exploratory Data Analysis</a><a class="anchor-link" href="#Part-I-:-Exploratory-Data-Analysis"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>3.0</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>364</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xscale</span><span class="p">(</span><span class="s1">'log'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>count                                        45976
unique                                        5148
top       2b6c0f514c2f2b04ad3c4583407dccd0810469ee
freq                                           364
Name: email, dtype: object
</pre>
</div>
</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Explore and remove duplicate articles from the <strong>df_content</strong> dataframe.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_content</span><span class="p">[</span><span class="n">df_content</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">])]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>doc_body</th>
      <th>doc_description</th>
      <th>doc_full_name</th>
      <th>doc_status</th>
      <th>article_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>365</th>
      <td>Follow Sign in / Sign up Home About Insight Da...</td>
      <td>During the seven-week Insight Data Engineering...</td>
      <td>Graph-based machine learning</td>
      <td>Live</td>
      <td>50</td>
    </tr>
    <tr>
      <th>692</th>
      <td>Homepage Follow Sign in / Sign up Homepage * H...</td>
      <td>One of the earliest documented catalogs was co...</td>
      <td>How smart catalogs can turn the big data flood...</td>
      <td>Live</td>
      <td>221</td>
    </tr>
    <tr>
      <th>761</th>
      <td>Homepage Follow Sign in Get started Homepage *...</td>
      <td>Today’s world of data science leverages data f...</td>
      <td>Using Apache Spark as a parallel processing fr...</td>
      <td>Live</td>
      <td>398</td>
    </tr>
    <tr>
      <th>970</th>
      <td>This video shows you how to construct queries ...</td>
      <td>This video shows you how to construct queries ...</td>
      <td>Use the Primary Index</td>
      <td>Live</td>
      <td>577</td>
    </tr>
    <tr>
      <th>971</th>
      <td>Homepage Follow Sign in Get started * Home\r\n...</td>
      <td>If you are like most data scientists, you are ...</td>
      <td>Self-service data preparation with IBM Data Re...</td>
      <td>Live</td>
      <td>232</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_content</span> <span class="o">=</span> <span class="n">df_content</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">df_content</span><span class="p">[</span><span class="n">df_content</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">])])</span> <span class="c1"># check</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_content</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>714
1051
5149
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>45993</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>find the most viewed <strong>article_id</strong>, as well as how often it was viewed.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1429.0    937
1330.0    927
1431.0    671
1427.0    643
1364.0    627
Name: article_id, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">email_mapper</span><span class="p">():</span>
    <span class="n">coded_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">cter</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">email_encoded</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">coded_dict</span><span class="p">:</span>
            <span class="n">coded_dict</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">=</span> <span class="n">cter</span>
            <span class="n">cter</span><span class="o">+=</span><span class="mi">1</span>
        
        <span class="n">email_encoded</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coded_dict</span><span class="p">[</span><span class="n">val</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">email_encoded</span>

<span class="n">email_encoded</span> <span class="o">=</span> <span class="n">email_mapper</span><span class="p">()</span>
<span class="k">del</span> <span class="n">df</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">email_encoded</span>

<span class="c1"># show header</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>article_id</th>
      <th>title</th>
      <th>user_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1430.0</td>
      <td>using pixiedust for fast, flexible, and easier...</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1314.0</td>
      <td>healthcare python streaming application demo</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1429.0</td>
      <td>use deep learning for image classification</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1338.0</td>
      <td>ml optimization using cognitive assistant</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1276.0</td>
      <td>deploy your python model as a restful api</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Part-II:-Rank-Based-Recommendations">
<a class="anchor" href="#Part-II:-Rank-Based-Recommendations" aria-hidden="true"><span class="octicon octicon-link"></span></a><a class="anchor" id="Rank">Part II: Rank-Based Recommendations</a><a class="anchor-link" href="#Part-II:-Rank-Based-Recommendations"> </a>
</h3>
<p>Unlike in the earlier lessons, we don't actually have ratings for whether a user liked an article or not.  We only know that a user has interacted with an article.  In these cases, the popularity of an article can really only be based on how often an article was interacted with.</p>
<p>return the <strong>n</strong> top articles ordered with most interactions as the top.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_top_articles</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    n - (int) the number of top articles to return</span>
<span class="sd">    df - (pandas dataframe) df as defined at the top of the notebook </span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    top_articles - (list) A list of the top 'n' article titles </span>
<span class="sd">    </span>
<span class="sd">    '''</span>
    <span class="c1"># Your code here</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">top_articles_idx</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span>
    <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">top_articles_idx</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">==</span><span class="nb">id</span><span class="p">][</span><span class="s1">'title'</span><span class="p">]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span>
    
    <span class="k">return</span> <span class="n">result</span> <span class="c1"># Return the top article titles from df (not df_content)</span>

<span class="k">def</span> <span class="nf">get_top_article_ids</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    n - (int) the number of top articles to return</span>
<span class="sd">    df - (pandas dataframe) df as defined at the top of the notebook </span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    top_articles - (list) A list of the top 'n' article titles </span>
<span class="sd">    </span>
<span class="sd">    '''</span>
    <span class="c1"># Your code here</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">[:</span><span class="n">n</span><span class="p">])</span> <span class="c1"># Return the top article ids</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">get_top_articles</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_top_article_ids</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>['use deep learning for image classification', 'insights from new york car accident reports', 'visualize car data with brunel', 'use xgboost, scikit-learn &amp; ibm watson machine learning apis', 'predicting churn with the spss random tree algorithm', 'healthcare python streaming application demo', 'finding optimal locations of new store using decision optimization', 'apache spark lab, part 1: basic concepts', 'analyze energy consumption in buildings', 'gosales transactions for logistic regression model']
[1429.0, 1330.0, 1431.0, 1427.0, 1364.0, 1314.0, 1293.0, 1170.0, 1162.0, 1304.0]
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Part-III:-User-User-Based-Collaborative-Filtering">
<a class="anchor" href="#Part-III:-User-User-Based-Collaborative-Filtering" aria-hidden="true"><span class="octicon octicon-link"></span></a><a class="anchor" id="User-User">Part III: User-User Based Collaborative Filtering</a><a class="anchor-link" href="#Part-III:-User-User-Based-Collaborative-Filtering"> </a>
</h3>
<p>reformat the <strong>df</strong> dataframe to be shaped with users as the rows and articles as the columns.</p>
<ul>
<li>
<strong>If a user has interacted with an article, then place a 1 where the user-row meets for that article-column</strong>.  It does not matter how many times a user has interacted with the article, all entries where a user has interacted with an article should be a 1.  </li>
</ul>
<ul>
<li>
<strong>If a user has not interacted with an item, then place a zero where the user-row meets for that article-column</strong>. </li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create_user_item_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    df - pandas dataframe with article_id, title, user_id columns</span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    user_item - user item matrix </span>
<span class="sd">    </span>
<span class="sd">    Description:</span>
<span class="sd">    Return a matrix with user ids as rows and article ids on the columns with 1 values where a user interacted with </span>
<span class="sd">    an article and a 0 otherwise</span>
<span class="sd">    '''</span>
    <span class="c1"># Fill in the function here</span>
    <span class="c1">#user_item = pd.pivot_table(df, index=['user_id'], columns=['article_id'], values=['title'],aggfunc=[np.sum], fill_value=0)</span>
    <span class="n">user_item</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'user_id'</span><span class="p">,</span> 
                            <span class="s1">'article_id'</span><span class="p">])[</span><span class="s1">'title'</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">user_item</span> <span class="c1"># return the user_item matrix </span>

<span class="n">user_item</span> <span class="o">=</span> <span class="n">create_user_item_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>take a user_id and provide an ordered list of the most similar users to that user (from most similar to least similar).  The returned result should not contain the provided user_id, as we know that each user is similar to him/herself. Because the results for each user here are binary, it (perhaps) makes sense to compute similarity as the dot product of two users.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">find_similar_users</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">user_item</span><span class="o">=</span><span class="n">user_item</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    user_id - (int) a user_id</span>
<span class="sd">    user_item - (pandas dataframe) matrix of users by articles: </span>
<span class="sd">                1's when a user has interacted with an article, 0 otherwise</span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    similar_users - (list) an ordered list where the closest users (largest dot product users)</span>
<span class="sd">                    are listed first</span>
<span class="sd">    </span>
<span class="sd">    Description:</span>
<span class="sd">    Computes the similarity of every pair of users based on the dot product</span>
<span class="sd">    Returns an ordered</span>
<span class="sd">    </span>
<span class="sd">    '''</span>
    <span class="c1"># compute similarity of each user to the provided user</span>
    <span class="c1"># sort by similarity</span>
    <span class="n">similarities</span> <span class="o">=</span> <span class="n">user_item</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">user_item</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">user_id</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># create list of just the ids</span>
    <span class="n">ids</span> <span class="o">=</span> <span class="n">similarities</span><span class="o">.</span><span class="n">index</span>
    <span class="c1"># remove the own user's id</span>
    <span class="n">most_similar_users</span> <span class="o">=</span> <span class="n">ids</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">most_similar_users</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">user_id</span><span class="p">))</span> <span class="c1"># return a list of the users in order from most to least similar</span>
        
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>return the articles you would recommend to each user.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_article_names</span><span class="p">(</span><span class="n">article_ids</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    article_ids - (list) a list of article ids</span>
<span class="sd">    df - (pandas dataframe) df as defined at the top of the notebook</span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    article_names - (list) a list of article names associated with the list of article ids </span>
<span class="sd">                    (this is identified by the title column)</span>
<span class="sd">    '''</span>
    <span class="n">article_names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">article_ids</span><span class="p">:</span>
        <span class="n">article_names</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="s1">'title'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">article_names</span> <span class="c1"># Return the article names associated with list of article ids</span>


<span class="k">def</span> <span class="nf">get_user_articles</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">user_item</span><span class="o">=</span><span class="n">user_item</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    user_id - (int) a user id</span>
<span class="sd">    user_item - (pandas dataframe) matrix of users by articles: </span>
<span class="sd">                1's when a user has interacted with an article, 0 otherwise</span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    article_ids - (list) a list of the article ids seen by the user</span>
<span class="sd">    article_names - (list) a list of article names associated with the list of article ids </span>
<span class="sd">                    (this is identified by the doc_full_name column in df_content)</span>
<span class="sd">    </span>
<span class="sd">    Description:</span>
<span class="sd">    Provides a list of the article_ids and article titles that have been seen by a user</span>
<span class="sd">    '''</span>
    <span class="c1"># Your code here</span>
    <span class="n">article_ids</span> <span class="o">=</span> <span class="n">user_item</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">user_id</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">article_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">article_ids</span><span class="p">[</span><span class="n">article_ids</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)]</span>
    <span class="n">article_names</span> <span class="o">=</span> <span class="n">get_article_names</span><span class="p">(</span><span class="n">article_ids</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">article_ids</span><span class="p">,</span> <span class="n">article_names</span> <span class="c1"># return the ids and names</span>


<span class="k">def</span> <span class="nf">user_user_recs</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    user_id - (int) a user id</span>
<span class="sd">    m - (int) the number of recommendations you want for the user</span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    recs - (list) a list of recommendations for the user</span>
<span class="sd">    </span>
<span class="sd">    Description:</span>
<span class="sd">    Loops through the users based on closeness to the input user_id</span>
<span class="sd">    For each user - finds articles the user hasn't seen before and provides them as recs</span>
<span class="sd">    Does this until m recommendations are found</span>
<span class="sd">    </span>
<span class="sd">    Notes:</span>
<span class="sd">    Users who are the same closeness are chosen arbitrarily as the 'next' user</span>
<span class="sd">    </span>
<span class="sd">    For the user where the number of recommended articles starts below m </span>
<span class="sd">    and ends exceeding m, the last items are chosen arbitrarily</span>
<span class="sd">    </span>
<span class="sd">    '''</span>
    <span class="c1"># Your code here</span>
    <span class="n">recs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">user_articles</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_user_articles</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">recs</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">similar_user_ids</span> <span class="o">=</span> <span class="n">find_similar_users</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">similar_user_articles</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_user_articles</span><span class="p">(</span><span class="n">similar_user_ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">recs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">similar_user_articles</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">user_articles</span><span class="p">)))</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">recs</span><span class="p">)[:</span><span class="n">m</span><span class="p">]</span> <span class="c1"># return your recommendations for this user_id    </span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_article_names</span><span class="p">(</span><span class="n">user_user_recs</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="c1"># Return 10 recommendations for user 1</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>['502    forgetting the past to learn the future: long ...\nName: title, dtype: object',
 'discover hidden facebook usage insights',
 'aspiring data scientists! start to learn statistics with these 6 books!',
 'using bigdl in dsx for deep learning on spark',
 'using machine learning to predict parking difficulty',
 'data science platforms are on the rise and ibm is leading the way',
 'a dynamic duo – inside machine learning – medium',
 'this week in data science (february 14, 2017)',
 'what is smote in an imbalanced class setting (e.g. fraud detection)?',
 'shaping data with ibm data refinery']</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>improve the consistency of the <strong>user_user_recs</strong> function from above.</p>
<ul>
<li>Instead of arbitrarily choosing when we obtain users who are all the same closeness to a given user - choose the users that have the most total article interactions before choosing those with fewer article interactions.</li>
</ul>
<ul>
<li>Instead of arbitrarily choosing articles from the user where the number of recommended articles starts below m and ends exceeding m, choose articles with the articles with the most total interactions before choosing those with fewer total interactions. This ranking should be  what would be obtained from the <strong>top_articles</strong> function you wrote earlier.</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_top_sorted_users</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">user_item</span><span class="o">=</span><span class="n">user_item</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    user_id - (int)</span>
<span class="sd">    df - (pandas dataframe) df as defined at the top of the notebook </span>
<span class="sd">    user_item - (pandas dataframe) matrix of users by articles: </span>
<span class="sd">            1's when a user has interacted with an article, 0 otherwise</span>
<span class="sd">    </span>
<span class="sd">            </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    neighbors_df - (pandas dataframe) a dataframe with:</span>
<span class="sd">                    neighbor_id - is a neighbor user_id</span>
<span class="sd">                    similarity - measure of the similarity of each user to the provided user_id</span>
<span class="sd">                    num_interactions - the number of articles viewed by the user - if a u</span>
<span class="sd">                    </span>
<span class="sd">    Other Details - sort the neighbors_df by the similarity and then by number of interactions where </span>
<span class="sd">                    highest of each is higher in the dataframe</span>
<span class="sd">     </span>
<span class="sd">    '''</span>
    <span class="c1"># Your code here</span>
    <span class="n">similar_user</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">find_similar_users</span><span class="p">(</span><span class="n">user_id</span><span class="p">))</span>
    <span class="n">num_interactions</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
    <span class="n">similarities</span> <span class="o">=</span> <span class="n">user_item</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">user_item</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">user_id</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">neighbors_df</span> <span class="o">=</span> <span class="n">num_interactions</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'num_interactions'</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">similarities</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">right_on</span><span class="o">=</span><span class="s2">"user_id"</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">neighbors_df</span> <span class="o">=</span> <span class="n">neighbors_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">'num_interactions'</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">neighbors_df</span> <span class="o">=</span> <span class="n">neighbors_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="s2">"similarity"</span><span class="p">,</span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"neighbor_id"</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">neighbors_df</span> <span class="c1"># Return the dataframe specified in the doc_string</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_top_sorted_users</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>num_interactions</th>
      <th>neighbor_id</th>
      <th>similarity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>13</th>
      <td>116</td>
      <td>170</td>
      <td>2</td>
    </tr>
    <tr>
      <th>12</th>
      <td>114</td>
      <td>3169</td>
      <td>2</td>
    </tr>
    <tr>
      <th>9</th>
      <td>97</td>
      <td>204</td>
      <td>2</td>
    </tr>
    <tr>
      <th>15</th>
      <td>95</td>
      <td>5138</td>
      <td>2</td>
    </tr>
    <tr>
      <th>0</th>
      <td>78</td>
      <td>40</td>
      <td>2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2110</th>
      <td>1</td>
      <td>1039</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4091</th>
      <td>1</td>
      <td>3150</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2041</th>
      <td>1</td>
      <td>1103</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4947</th>
      <td>1</td>
      <td>3182</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1356</th>
      <td>1</td>
      <td>2049</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5148 rows × 3 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">user_user_recs_part2</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    user_id - (int) a user id</span>
<span class="sd">    m - (int) the number of recommendations you want for the user</span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    recs - (list) a list of recommendations for the user by article id</span>
<span class="sd">    rec_names - (list) a list of recommendations for the user by article title</span>
<span class="sd">    </span>
<span class="sd">    Description:</span>
<span class="sd">    Loops through the users based on closeness to the input user_id</span>
<span class="sd">    For each user - finds articles the user hasn't seen before and provides them as recs</span>
<span class="sd">    Does this until m recommendations are found</span>
<span class="sd">    </span>
<span class="sd">    Notes:</span>
<span class="sd">    * Choose the users that have the most total article interactions </span>
<span class="sd">    before choosing those with fewer article interactions.</span>

<span class="sd">    * Choose articles with the articles with the most total interactions </span>
<span class="sd">    before choosing those with fewer total interactions. </span>
<span class="sd">   </span>
<span class="sd">    '''</span>
    <span class="c1"># Your code here</span>
    <span class="n">recs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">top_df</span> <span class="o">=</span> <span class="n">get_top_sorted_users</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">user_article_ids</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_user_articles</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">recs</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">similar_user_articles</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_user_articles</span><span class="p">(</span><span class="n">top_df</span><span class="p">[</span><span class="s1">'neighbor_id'</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
        <span class="n">possible_recommendations</span> <span class="o">=</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">similar_user_articles</span><span class="p">])</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">user_article_ids</span><span class="p">)))</span>
        <span class="n">top_articles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">possible_recommendations</span><span class="p">)][</span><span class="s1">'article_id'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>
        <span class="n">recs</span> <span class="o">+=</span> <span class="n">top_articles</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">recs</span> <span class="o">=</span> <span class="n">recs</span><span class="p">[:</span><span class="n">m</span><span class="p">]</span>
    <span class="n">rec_names</span> <span class="o">=</span> <span class="n">get_article_names</span><span class="p">(</span><span class="n">recs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">recs</span><span class="p">,</span> <span class="n">rec_names</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rec_ids</span><span class="p">,</span> <span class="n">rec_names</span> <span class="o">=</span> <span class="n">user_user_recs_part2</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"The top 10 recommendations for user 20 are the following article ids:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rec_ids</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"The top 10 recommendations for user 20 are the following article names:"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rec_names</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>The top 10 recommendations for user 20 are the following article ids:
['1429.0', '1330.0', '1431.0', '1427.0', '1364.0', '1314.0', '1162.0', '1304.0', '43.0', '1351.0']

The top 10 recommendations for user 20 are the following article names:
['use deep learning for image classification', 'insights from new york car accident reports', 'visualize car data with brunel', 'use xgboost, scikit-learn &amp; ibm watson machine learning apis', 'predicting churn with the spss random tree algorithm', 'healthcare python streaming application demo', 'analyze energy consumption in buildings', 'gosales transactions for logistic regression model', 'deep learning with tensorflow course by big data university', 'model bike sharing data with spss']
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user1_most_sim</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_top_sorted_users</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="s1">'neighbor_id'</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="c1"># Find the user that is most similar to user 1 </span>
<span class="n">user131_10th_sim</span> <span class="o">=</span> <span class="p">(</span><span class="n">get_top_sorted_users</span><span class="p">(</span><span class="mi">131</span><span class="p">)[</span><span class="s1">'neighbor_id'</span><span class="p">][</span><span class="mi">9</span><span class="p">])</span><span class="c1"># Find the 10th most similar user to user 131</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can use get_top_article_ids(n) function to recommend the top articles with most interactions. This will work in general cases since we can assume these articles were more interacted because it drew more people's interest. Another better way to make recommendation to new user may be to recommend top articles but in order of newest. The idea is that it is still popular and it reduces risk of recommending articles based on date it is created. (Since the longer it exists, the more chance it has more interactions than newer ones without much special attraction)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Part-IV:-Matrix-Factorization">
<a class="anchor" href="#Part-IV:-Matrix-Factorization" aria-hidden="true"><span class="octicon octicon-link"></span></a><a class="anchor" id="Matrix-Fact">Part IV: Matrix Factorization</a><a class="anchor-link" href="#Part-IV:-Matrix-Factorization"> </a>
</h3>
<p>build use matrix factorization to make article recommendations to the users on the IBM Watson Studio platform.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_item_matrix</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">'user_item_matrix.p'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_item_matrix</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>article_id</th>
      <th>0.0</th>
      <th>100.0</th>
      <th>1000.0</th>
      <th>1004.0</th>
      <th>1006.0</th>
      <th>1008.0</th>
      <th>101.0</th>
      <th>1014.0</th>
      <th>1015.0</th>
      <th>1016.0</th>
      <th>...</th>
      <th>977.0</th>
      <th>98.0</th>
      <th>981.0</th>
      <th>984.0</th>
      <th>985.0</th>
      <th>986.0</th>
      <th>990.0</th>
      <th>993.0</th>
      <th>996.0</th>
      <th>997.0</th>
    </tr>
    <tr>
      <th>user_id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 714 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">u</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">vt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">user_item_matrix</span><span class="p">)</span><span class="c1"># use the built in to get the three matrices</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Remember that SVD require there are no NAN values!!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>to get an idea of how the accuracy improves as we increase the number of latent features.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_latent_feats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">700</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>
<span class="n">sum_errs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">num_latent_feats</span><span class="p">:</span>
    <span class="c1"># restructure with k latent features</span>
    <span class="n">s_new</span><span class="p">,</span> <span class="n">u_new</span><span class="p">,</span> <span class="n">vt_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">s</span><span class="p">[:</span><span class="n">k</span><span class="p">]),</span> <span class="n">u</span><span class="p">[:,</span> <span class="p">:</span><span class="n">k</span><span class="p">],</span> <span class="n">vt</span><span class="p">[:</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span>
    
    <span class="c1"># take dot product</span>
    <span class="n">user_item_est</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">u_new</span><span class="p">,</span> <span class="n">s_new</span><span class="p">),</span> <span class="n">vt_new</span><span class="p">))</span>
    
    <span class="c1"># compute error for each prediction to actual value</span>
    <span class="n">diffs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">user_item_matrix</span><span class="p">,</span> <span class="n">user_item_est</span><span class="p">)</span>
    
    <span class="c1"># total errors and keep track of them</span>
    <span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">diffs</span><span class="p">)))</span>
    <span class="n">sum_errs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    
    
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_latent_feats</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">sum_errs</span><span class="p">)</span><span class="o">/</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Number of Latent Features'</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Accuracy'</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Accuracy vs. Number of Latent Features'</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAEWCAYAAABrDZDcAAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjMuMiwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy8vihELAAAACXBIWXMAAAsTAAALEwEAmpwYAAAwvUlEQVR4nO3deZwcdZ3/8dd77mRyTO77AkIgHDkYbsFwiIDchxBcFDzYqLi6iwq4+0NUXA/EVRcUUQERAQkgBAgCKhFkOZKQOyHkIMlMjsnkmMzkmLM/vz+qJqk0M5meMD3dPf15Ph6dqbs+Vd2pT9X3W/UtmRnOOeeyV06qA3DOOZdangiccy7LeSJwzrks54nAOeeynCcC55zLcp4InHMuy3kicO4AJK2RdHaK1j1I0quSaiTdlYoYXHbwRJAikmZJ2i6pMNWxZApJoyWZpOfjhj8s6fYUhZVMNwBbgF5mdlP8SEkPSrqjvQuVdLukhzsiwHB5syR9/gDjm7+3nZHPgg+5zuZl5n2Y5biAJ4IUkDQaOA0w4KJOXndX+I9zkqRTUx1Eexzkfh8FLLWu89RniZn1CD8TUhmIAn78C/mOSI1PA28CDwKfiY6QNELSU5IqJW2VdHdk3BckLQuLCpZKmhwON0mHRabbe6YoaYqkckk3S9oEPCCpj6TnwnVsD7uHR+bvK+kBSRvC8U+HwxdLujAyXb6kLZImxm9gGOcFkf68cNrJkorCs/itkqokzZY0qB3778dAi2fCkq6T9M+4YXv3T7hvfinphfDM9HVJgyX9LNzWdyVNilvs8eH+3h7ul6LIsi+QND/cjv+TdGxk3Jpwvy8EdrWUDCSdEm7/jvDvKc1xEvw2vhnG2a7iKUk/l1QmqVrSXEmnhcPPBb4FXBU9M5fUW9LvJG2UtF7SHZJyo/tU0k/CffC+pPPCcd8nOKm5O1ze3S1H1GqcR0h6WdI2ScslfTIy7hOS5oXbUKb9r/peDf9Whes9WXFXOoq7alBw5fJ9Sa8Du4FD2lj/+eH3XhPuk6+3Z9syipn5p5M/wErgS8BxQAMwKByeCywA/gcoBoqAj4TjrgTWA8cDAg4DRoXjDDgssvwHgTvC7ilAI/AjoBDoBvQDLge6Az2B6cDTkfmfB/4E9AHygY+Gw78J/Cky3cXAola28Tbgj5H+TwDvht3/Cjwbrj833A+9Ethvo8Nt7RHui7PD4Q8Dt4fd1wH/jJtv7/4J982WcJ1FwN+B9wmScy5BgnklMu8aYDEwAugLvB7Zt5OBzcCJ4byfCacvjMw7P5y3Wwvb0xfYDlwL5AFTw/5+8d9jK/uj1fHAv4Tfcx5wE7AJKArH3Q48HDf908CvCX53A4G3gX+N7NMG4Avhdn4R2AAoHD8L+HwC31te3PBioAy4PoxzcvjdHBX57R5DcMJ6LFABXNLaMuO3K36aMM51wFHh+nq3sf6NwGlhdx9gcqqPHcn6+BVBJ5P0EYJL/sfNbC6wCrgmHH0CMBT4hpntMrNaM2s+u/088GMzm22BlWa2NsHVxoBvm1mdme0xs61m9qSZ7TazGuD7wEfD+IYA5wHTzGy7mTWY2T/C5TwMnC+pV9h/LfCHVtb5CHCRpO5h/zXhMAgOKv0IDs5NZjbXzKoT3BaA2jDmdpePh/4crrMW+DNQa2YPmVkTQQKMvyK428zKzGxbuN6p4fAvAL82s7fC7fg9UAecFJn3F+G8e1qI4xPACjP7g5k1mtmjwLvAhS1M2y5m9nD4PTea2V0EJwHjWpo2vBo7D/ha+LvbTHAycnVksrVm9ptwH/0eGAK05yoOYEt45VQVnl1fAKwxswfCON8BngSuCLdhlpktMrOYmS0EHiX8nX4ID5rZEjNrBM490PoJfqfjJfUK/y+88yHXnbY8EXS+zwAvmdmWsP8R9hUPjSD4D9fYwnwjCJLGwagMD3oASOou6deS1kqqJrjMLgmLAkYA28xse/xCzGwDwRnx5ZJKCA4ef2xphWa2ElgGXBgmg4vYlwj+ALwIPBYWP/1YUn47t+k3wKBoUVU7VES697TQ3yNu+rJI91qCZA1BQr8pcnCrIth/Q1uZN97QcHlRa4FhB4w+AZJuCovndoRx9Qb6tzL5KIIrv42R7fg1wZVBs03NHWa2O+yM309t6W9mJeHnJ+F6T4zbf58CBofbcKKkVxQUYe4Aph1gGxIV/T4OuH6Cq+bzgbWS/iHp5A+57rTVFSoOM4akbsAngVwF5fUQnKmVSJpA8CMdKSmvhWRQBhzayqJ3ExSzNBsMlEf64ysbbyI4OzzRzDYpKOOfR1DkVAb0lVRiZlUtrOv3BFcnecAbZra+te0lOIObSnDCsTRMDphZA/Ad4DsKKs5nAsuB3x1gWfsxswZJ3wG+ByyJjNpFZF9IGhw/70EYEekeSVAsAsG++r6Zff9AoR5g3AaCg1HUSOAv7Y4wIqwPuBk4C1hiZjFJ2wm+35ZiKiO4kunfyklIWw62MrsM+IeZfayV8Y8AdwPnmVmtpJ+xLxG0tM79vnv2HdBbi/WA6zez2cDF4UnKjcDj7P9b6DL8iqBzXQI0AeOBieHnSOA1gjLqtwnKJX8oqVhBpWrz3TG/Bb4u6TgFDpPUfBCZD1wjKTesDGzr8rknwZlvlaS+wLebR5jZRuAF4JcKKpXzJZ0emfdpgrLUrwIPtbGex4BzCMqUm68GkHSGpGPCK5BqgkvwpjaW1ZI/ECTScyPDFgBHSZqooFL39oNYbrwvSxoe7qtvERQfQXBVMi08c1X4nX1CUs8ElzsTOFzSNQoq068i+G08147YcsPfSfOngOD7bQQqgTxJtwG9IvNUAKMV3jUTfucvAXdJ6iUpR9KhkhIthqkADmlHzM2eI9j+a8PfWb6k4yUdGY7vSXB1WivpBPYVoRJuWyxuvfOB0yWNlNQbuPVg1y+pQNKnJPUOT1yqObjfaEbwRNC5PgM8YGbrzGxT84fgrOdTBGdsFxJUBK8jOKu/CsDMphOUTz8C1BAckPuGy/1qOF9VuJyn24jjZwSVxlsI7l6KPwO9luDg/C5BZejXmkeEZd1PAmOApw60kvAA8wZwCvsOnhCcqT1B8J9rGfAPgvoHJN0r6d424m9efhNBEusbGfYe8F3gr8AK4J8tz90ujxAcKFeHnzvCdc0hqCe4m6CSdyVBxWpCzGwrQTn5TcBWgsr4CyLFhom4hSCpN3/+TlDs9gLwHkFRUy37F4lMD/9uldRc7v1poABYGm7LEwT1AIn4OXCFgjuKfpFo4GH91DkEdREbCIqfmm9qgOCGiu9KqiG4+eDxyLy7Cf4/vB4W65xkZi8T/M4WAnNpI6EmsP5rgTVh8ek0ggr4Lqm51t+5hIVnmIebWZf9j+FcNvE6AtcuYfHI5wjOlpxzXYAXDbmESfoCQRHDC2b2alvTO+cygxcNOedclvMrAuecy3IZV0fQv39/Gz16dKrDcM65jDJ37twtZjagpXEZlwhGjx7NnDlzUh2Gc85lFEmtNknjRUPOOZflPBE451yW80TgnHNZzhOBc85lOU8EzjmX5ZKWCCTdL2mzpMWtjJekX0haKWmhwtcuOuec61zJvCJ4kP2bB453HjA2/NwA/CqJsTjnnGtF0p4jMLNXw5eOtOZi4CEL2rh4U1KJpCFh08XOOZewppjR0BSjvilGQ2OMhiajMRajKWY0xmzv+Gh/Y1M4PBajqSkyPDJf8E7f4G02za3xGPuGYYYBsZjRZME74GNmNMUgFr4PuCkWzMN+ywi1s4mf0tF9Of3wFp8J+1BS+UDZMPZvI708HPaBRCDpBoKrBkaOHNkpwTnnDk5jU4xddU3U1DWwq66JnXUN1NQ2sru+ifrG4GBd3xh8Gpq7w791jTFqG5rCT4w9zd2NMWrrm6htbKKuIbbvoB/OF8vgJtOktqdpNu2jh3a5RNDS5rf4dZrZfcB9AKWlpRn8lTuX/syMmrpGtu+qZ9uueqp2N1Bd20D1ngaqaxvDvw1U72ncO7ymtpGaukZ21jayp6H9L/KSoCA3h4K8HIryc+mWn0tRfg7d8nMpzM+ld7d8BvcqpCg/l8K8YLr83BwKcoO/+bnNw0RBXg65OSI/J4e8XJGbI/JywmGR/pwcyM/NCfv3Dc/LDfpzFAxrjk9o70Fb4T9C5AhyFEyfk9NKt6Lb2o4jfydJZSIoZ//3fw5n37tgnXMdpLahie27g4P69l0NbNtdv/cgv21X/Qf6t++up6Gp9fOtwrwcenXLp1dRHr265VPSvYDhfbvTqyiPHoV59CjMp0dRHj0KcyPdeXQvCA7i+bk5+x/M83LIy1FaHiCzRSoTwQzgRkmPAScCO7x+wLnExWLGlp11bNxRy8Yde9hQFfwN+mvZtKOW7bvr2V3f8hm6BL275dO3uIB+xQWM7NudiSNK6FNcQN/uBfQtDj4l3fPp3S2fnkX59CzKoyg/t5O31CVb0hKBpEeBKUB/SeUE75bNBzCzewle3H0+wXtedwPXJysW5zLNzrpGKqprqdhRS0VNLRXVdVRU17K5uo5N1bXBuOraD5y5F+TlMLR3EYN7F3H86D7061G494DeZ+/BPZ++xYX07pa/t+jDZbdk3jU0tY3xBnw5Wet3Lt3FYkb59j2s2FzDis07WVGxk5Wba1hVuYuddY0fmL5HYR4DexUyqGcRpaP6MKSkG0N6FzGkd/PfIvoWF3gRi2u3jGuG2rlME4sZ66v2sHxTDcsrali5eScrNgd/axtie6cb1KuQsQN7cvnkYQwt6cagXkUM7FXI4F5FDOxVRI9C/+/qksN/Wc51EDOjsqaO5RU1LN9Uw3sVNSyv2MmKipr9yumH9i7isEE9+dSJ/Th8UA8OG9iTwwb2oHe3/BRG77KZJwLnDtKOPQ0sKKti3roq5pVtZ0FZFdt3N+wd379HIeMG9+Cq40cwblBPDh/ck7EDe9CzyA/4Lr14InAuAY1NMd6r2Mm8su3BgX/ddlZV7gKCu28OH9iTc8YPZvzQXhw+qCeHD+pBvx6FKY7aucR4InCuBZtrapm3ror5ZcFBf2H5jr3FO/2KC5g0soTLJg9n4ogSjh3e28/yXUbzROCyXl1jE0s2VO8905+3ror1VXsAyMsRRw3txZXHDWfyqD5MGtGHEX27+Z05rkvxROCy0potu3hl+WZmLa/kzdVbqWsM7t4Z2ruISSP7cP2po5k0soSjhvb2B6hcl+eJwGWF2oYm3ly9lVnLK5m1fDNrtu4GYEz/YqaeMJKTDunLxBF9GNy7KMWROtf5PBG4LmtD1R5eXlrBK8s388aq4Ky/KD+Hkw/px/WnjmHKuAGM6lec6jCdSzlPBK7LMDPe3VTDS0sqeHnZJhavrwb2nfVPGTeAkw7p50U9zsXxROAyWmNTjDlrt/PSkgpeWrqJ8u17kGDyyD7cct4RfGz8IA4d0CPVYTqX1jwRuIxjZiwo38Gjb63jxaWbqNrdQEFeDh85rD83nnEYZx05iAE9/R5+5xLlicBljD31TcxYsJ4/vLmWxeurKS7I5ZyjBnPO+EGcfvgAir0tHucOiv/PcWlv5ead/PGttTwxt5ya2kbGDerJ9y4+iksmDfMHuZzrAJ4IXFpqaIrx8tIK/vDGWt5YvZX8XHHe0UO49uRRlI7q4w90OdeBPBG4tFK1u54/vrWOh95YQ0V1HcNKuvHNc8fxydIR9Pe2e5xLCk8ELi2srtzJA6+v4Ym55expaOK0sf3570uPYcq4gf4WLeeSzBOBSxkz483V2/jdP9/nb+9WkJ+Tw8UTh/K508ZwxOBeqQ7PuazhicB1uvrGGM8v2sBvX3ufJRuq6VtcwFfOHMu/nDSSgT29iQfnOpsnAtdpzIwXFm/iv2cuo3z7Hg4b2IMfXHYMl04a5k/7OpdCnghcp1i2sZrvPLuEN1dv44jBPbn/ulKmHD6QHC//dy7lkpoIJJ0L/BzIBX5rZj+MG98HuB84FKgFPmtmi5MZk+tc23bVc9dLy3n07XX07pbPHZcczdXHjyAvNyfVoTnnQklLBJJygXuAjwHlwGxJM8xsaWSybwHzzexSSUeE05+VrJhc52loivHwm2v5n5ffY1d9E58+eTRfO3ssJd0LUh2acy5OMq8ITgBWmtlqAEmPARcD0UQwHvgBgJm9K2m0pEFmVpHEuFySvbaiku8+u5QVm3fykcP6c9uF4zl8UM9Uh+Wca0UyE8EwoCzSXw6cGDfNAuAy4J+STgBGAcOB/RKBpBuAGwBGjhyZrHjdh1RRXcttzyzmxSUVjOzbnfuuPY6PjR/kTwE7l+aSmQha+t9vcf0/BH4uaT6wCJgHNH5gJrP7gPsASktL45fhUszMmD63nO89t5T6xhjf+Pg4Pn/aGArz/E4g5zJBMhNBOTAi0j8c2BCdwMyqgesBFJw2vh9+XIYo376bW59axGsrtnDC6L788PJjOMTb/3cuoyQzEcwGxkoaA6wHrgauiU4gqQTYbWb1wOeBV8Pk4NJcLGY8/NZafvTCuwB87+Kj+NSJo/x2UOcyUNISgZk1SroReJHg9tH7zWyJpGnh+HuBI4GHJDURVCJ/LlnxuI7z/pZd3PzEQt5es43TxvbnB5cdw/A+3VMdlnPuICX1OQIzmwnMjBt2b6T7DWBsMmNwHaexKcb9r7/PXS+9R2FeDj++4liuPG64VwY7l+H8yWKXkNWVO/mPxxcwv6yKc8YP4o5LjmZgL28XyLmuwBOBOyAz4+G31vHfzy+jIC+HX0ydxIXHDvGrAOe6EE8ErlWbq2v55pMLmbW8ktPG9ucnV05gkF8FONfleCJwLXph0Ua+9edF7Glo4rsXH8W1J43yqwDnuihPBG4/1bUN3P7MEp6at54Jw3vz06smcqg/F+Bcl+aJwO31xqqtfH36AjZV1/LVs8Zy45mHke+thDrX5XkicMRixk9ffo97Zq1kdL9invziKUwcUZLqsJxzncQTQZarb4zxzScW8PT8DVxVOoJvXzSe7gX+s3Aum/j/+CxWU9vAtIfn8vrKrXzj4+P40pRDvULYuSzkiSBLVVTXct0Ds1lRUcNPrpzAFccNT3VIzrkU8USQhVZu3sln7n+b7bvr+d11x/PRwwekOiTnXAp5Isgyc9Zs4/MPzSEvR/zphpM5ZnjvVIfknEsxTwRZ5MUlm/i3R+cxtKQbv7/+BEb28xZDnXOeCLLGH95Yw7dnLOHY4SX87jOl9OtRmOqQnHNpwhNBFrjnlZXc+eJyzjpiIHdfM5luBf4KSefcPp4IurjnF27kzheXc8nEofzkygnk+ZPCzrk4flTowhav38FN0+czeWQJP7riWE8CzrkW+ZGhi9qys44bHppDn+4F3HvtcRTmeXGQc65lXjTUBdU3xvjiw3PZuqueJ6adwsCe/g4B51zrPBF0MWbGbc8sZvaa7fxi6iR/TsA51yYvGupiHnpjLY/NLuPLZxzKRROGpjoc51wGSGoikHSupOWSVkq6pYXxvSU9K2mBpCWSrk9mPF3d/63cwnefW8rZRw7kpo+NS3U4zrkMkbREICkXuAc4DxgPTJU0Pm6yLwNLzWwCMAW4S1JBsmLqytZu3cWXHnmHQwcU8z9XTSQnx1sRdc4lJplXBCcAK81stZnVA48BF8dNY0BPBW0f9wC2AY1JjKlL2lnXyBcemgPAbz5dSs+i/BRH5JzLJMlMBMOAskh/eTgs6m7gSGADsAj4qpnF4hck6QZJcyTNqaysTFa8GSkWM7722HxWVe7inmsmM6pfcapDcs5lmGQmgpbKJiyu/+PAfGAoMBG4W1KvD8xkdp+ZlZpZ6YAB3mRy1M//toK/LqvgtgvGc+ph/VMdjnMuAyUzEZQDIyL9wwnO/KOuB56ywErgfeCIJMbUpby5eiu/+PsKLp88nE+fPCrV4TjnMlQyE8FsYKykMWEF8NXAjLhp1gFnAUgaBIwDVicxpi6janc9//6n+YzpV8x3Lz7KXzHpnDtoSXugzMwaJd0IvAjkAveb2RJJ08Lx9wLfAx6UtIigKOlmM9uSrJi6CjPj5icXsmVnHX/+0qkUF/pzgc65g5fUI4iZzQRmxg27N9K9ATgnmTF0RY+8vY4Xl1Twn+cfydHD/Mlh59yH408WZ5gVFTV877mlnDa2P5/7yJhUh+Oc6wI8EWSQ2oYmvvLoPHoU5nHXJyf4Q2POuQ7hhcsZ5Aczl/HuphoeuP54b1HUOddh/IogQ/x1aQW/f2Mtnz11DGeMG5jqcJxzXYgnggxQUV3LN55YwPghvbj5PG9MzjnXsTwRpLlYzPiPx+dT2xDjF1Mn+ZvGnHMdzhNBmvv1q6t5feVWvn3heA4b2CPV4TjnuiBPBGlsQVkVd720nPOPGcxVx49oewbnnDsIngjSVF1jEzdNX8CAnoX84NJjvQkJ51zS+O2jaeqev69k5eadPHD98fTu7u8XcM4lj18RpKFlG6v55axVXDZpmN8q6pxLOk8EaaaxKcbNTy6kd7d8/t8F8W/2dM65judFQ2nmgdfXsLB8B/87dRJ9iv31zc655GvzikDSBZL8yqETrNmyi7teXs7ZRw7igmOHpDoc51yWSOQAfzWwQtKPJR2Z7ICylZlxy1MLyc/J4Y5Ljva7hJxznabNRGBm/wJMAlYBD0h6I3yZfM+kR5dFHptdxpurt3Hr+UcyuLc3KOec6zwJFfmYWTXwJPAYMAS4FHhH0leSGFvW2LSjlv9+fhknHdKXq/3BMedcJ0ukjuBCSX8G/g7kAyeY2XnABODrSY6vyzMz/uvpxdQ3xfjhZcf6Owacc50ukbuGrgT+x8xejQ40s92SPpucsLLH84s28tdlFXzr/CMY3b841eE457JQIong28DG5h5J3YBBZrbGzP6WtMiywPZd9Xz7mSUcO7w3nz3VXzvpnEuNROoIpgOxSH9TOKxNks6VtFzSSkm3tDD+G5Lmh5/Fkpok9U0s9Mz3veeXsmNPAz+6/Fjycv0OXedcaiRy9Mkzs/rmnrC7zSedJOUC9wDnAeOBqZL2e1TWzO40s4lmNhG4FfiHmW1rR/wZ69X3KnnqnfV8ccqhHDmkV6rDcc5lsUQSQaWki5p7JF0MbElgvhOAlWa2OkwejwEXH2D6qcCjCSw345kZd764nJF9u3PjmYelOhznXJZLJBFMA74laZ2kMuBm4F8TmG8YUBbpLw+HfYCk7sC5BLeotjT+BklzJM2prKxMYNXp7bUVW1i0fgdfmnKov3HMOZdybVYWm9kq4CRJPQCZWU2Cy27pPkhrZdoLgddbKxYys/uA+wBKS0tbW0bGuOeVlQzuVcSlk1vMi84516kSanRO0ieAo4Ci5qYPzOy7bcxWDkSfjhoObGhl2qvJkmKhOWu28db727jtgvF+NeCcSwuJPFB2L3AV8BWCs/wrgVEJLHs2MFbSGEkFBAf7GS0svzfwUeCZdsSdse55ZSV9iwu4+gR/gtg5lx4SqSM4xcw+DWw3s+8AJ7P/mX6LzKwRuBF4EVgGPG5mSyRNkzQtMumlwEtmtqv94WeWxet38MrySj576mi6F3gL4M659JDI0ag2/Ltb0lBgK5DQ009mNhOYGTfs3rj+B4EHE1lepvvVrFX0LMzj2pNHpzoU55zbK5ErgmcllQB3Au8Aa8iS8vyOtKpyJzMXb+Tak0fRu5u/g9g5lz4OeEUQvpDmb2ZWBTwp6TmgyMx2dEZwXcmvZq2iMC+Hz37Em5JwzqWXA14RmFkMuCvSX+dJoP3Kt+/m6Xnrufr4kfTvUZjqcJxzbj+JFA29JOly+SuzDtpvXl0NwA2nH5LiSJxz7oMSqSz+D6AYaJRUS3ALqZmZN5CTgMqaOh6bXcZlk4cxtKRbqsNxzrkPSOTJYn8l5Yfwu3++T0NTjC9O8TaFnHPpqc1EIOn0lobHv6jGfdCO3Q08/OZazj9mCGP8pTPOuTSVSNHQNyLdRQStis4FzkxKRF3I799Yw866Rr58hl8NOOfSVyJFQxdG+yWNAH6ctIi6iF11jdz/+vucdcRAf9+Acy6tHcxrscqBozs6kK7m0bfXUbW7gS/51YBzLs0lUkfwv+xrPjoHmAgsSGJMGa+usYn7Xl3NyYf047hRfVIdjnPOHVAidQRzIt2NwKNm9nqS4ukS/vzOejbX1PHTT05MdSjOOdemRBLBE0CtmTVB8C5iSd3NbHdyQ8tcj84uY9ygnpx6WL9Uh+Kcc21KpI7gb0D0SahuwF+TE07mW1FRw4KyKq4sHY4/jO2cywSJJIIiM9vZ3BN2d09eSJlt+txy8nLEJZP8NZTOucyQSCLYJWlyc4+k44A9yQspczU0xXjqnfWcccRAb1zOOZcxEqkj+BowXVLz+4aHELy60sWZtbySLTvr+GSpv4bSOZc5EnmgbLakI4BxBA3OvWtmDUmPLANNn1NG/x4FTBk3INWhOOdcwhJ5ef2XgWIzW2xmi4Aekr6U/NAyy5addfz93c1cOmkY+bkH85yec86lRiJHrC+EbygDwMy2A19IWkQZ6ul562mMGVd6sZBzLsMkkghyoi+lkZQLFCQvpMxjZjwxt5wJI0o4fJC32u2cyyyJJIIXgcclnSXpTIIX17+QyMIlnStpuaSVkm5pZZopkuZLWiLpH4mHnj4Wrd/Bu5tquPK44akOxTnn2i2Ru4ZuBm4AvkhQWTyP4M6hAwqvHO4BPkbQUN1sSTPMbGlkmhLgl8C5ZrZO0sB2b0EamD6nnMK8HC6cMDTVoTjnXLu1eUUQvsD+TWA1UAqcBSxLYNknACvNbLWZ1QOPARfHTXMN8JSZrQvXtbkdsaeF2oYmnpm/no8fNZje3fJTHY5zzrVbq1cEkg4HrgamAluBPwGY2RkJLnsYUBbpLwdOjJvmcCBf0iygJ/BzM3uohVhuILgqYeTIkQmuvnO8vLSC6tpGriz1YiHnXGY6UNHQu8BrwIVmthJA0r+3Y9ktNbRjcf15wHEEVxndgDckvWlm7+03k9l9wH0ApaWl8ctIqelzyxlW0o1TDu2f6lCcc+6gHKho6HJgE/CKpN9IOouWD+6tKQei91IOBza0MM1fzGyXmW0BXgUmtGMdKbWhag+vrajk8snDyM3xBuacc5mp1URgZn82s6uAI4BZwL8DgyT9StI5CSx7NjBW0hhJBQTFTDPipnkGOE1SnqTuBEVHidQ/pIWn3inHDK44zp8dcM5lrkQqi3eZ2R/N7AKCs/r5QIu3gsbN1wjcSHD76TLgcTNbImmapGnhNMuAvwALgbeB35rZ4oPdmM7U/OzAiWP6MrKfN8bqnMtcidw+upeZbQN+HX4SmX4mMDNu2L1x/XcCd7YnjnQwe8121mzdzY1njk11KM4596F4ozgHafqcMooLcjn/mMGpDsU55z4UTwQHYVddI88v2sgFxw6le0G7Lqqccy7teCI4CM8v2sju+iZ/dsA51yV4IjgIT8wp55D+xRw3qk+qQ3HOuQ/NE0E7rdmyi7fXbOMKfzm9c66L8ETQTk/NW48El03yYiHnXNfgiaAdzIxnF2zg5EP6Mbh3UarDcc65DuGJoB0Wr6/m/S27uMibm3bOdSGeCNphxoL15OeKc4/2Zwecc12HJ4IExWLGcws3cvrYAZR09zd1Oue6Dk8ECZqzdjsbd9Ry0UQvFnLOdS2eCBI0Y8F6ivJzOPvIQakOxTnnOpQnggQ0NMWYuWgTZx85iOJCb1LCOde1eCJIwOsrt7BtV72/nN451yV5IkjAsws20rMojynjBqQ6FOec63CeCNpQ29DES0s2ce5RgynMy011OM451+E8EbRh1vLN1NQ1+t1CzrkuyxNBG2Ys2ED/HgWcfEi/VIfinHNJ4YngAGpqG/jbss2cf8wQ8nJ9VznnuiY/uh3AX5dVUNcY87aFnHNdmieCA5gxfwPDSroxeaS/gMY513UlNRFIOlfSckkrJd3SwvgpknZImh9+bktmPO2xfVc9r63YwgUThpCT4y+gcc51XUl7TFZSLnAP8DGgHJgtaYaZLY2b9DUzuyBZcRysmYs30hgzLjzWi4Wcc11bMq8ITgBWmtlqM6sHHgMuTuL6OtSzCzZwyIBijhraK9WhOOdcUiUzEQwDyiL95eGweCdLWiDpBUlHtbQgSTdImiNpTmVlZTJi3c+mHbW89f42Lpow1N9L7Jzr8pKZCFo6glpc/zvAKDObAPwv8HRLCzKz+8ys1MxKBwxIfjMPzy3cgBnetpBzLiskMxGUAyMi/cOBDdEJzKzazHaG3TOBfEn9kxhTQp5dsIGjhvbi0AE9Uh2Kc84lXTITwWxgrKQxkgqAq4EZ0QkkDVZY9iLphDCerUmMqU1rtuxiQfkOf3bAOZc1knbXkJk1SroReBHIBe43syWSpoXj7wWuAL4oqRHYA1xtZvHFR53quYXBRcsFngicc1kiqW9ZCYt7ZsYNuzfSfTdwdzJjaK8ZCzZw/Og+DCvplupQnHOuU/iTxRHvbqrmvYqdXizknMsqnggiZi0Pbk39+NGDUxyJc851Hk8EEfPXVTGyb3cG9ixKdSjOOddpPBFEzC+rYuKIklSH4ZxzncoTQWjTjlo2Vdd6InDOZR1PBKH5ZVUATBxZktI4nHOus3kiCM0vqyI/V4wf4o3MOeeyiyeC0Pyy7Ywf0oui/NxUh+Kcc53KEwHQFDMWle/w+gHnXFbyRACs2FzDrvomrx9wzmUlTwQEzw8ATBzh7yZ2zmUfTwQEFcUl3fMZ3a97qkNxzrlO54mAIBFMGF7ibyNzzmWlrE8Eu+oaea+ixiuKnXNZK+sTwcLyHcTMHyRzzmWvrE8Ee58oHl6S0jiccy5VPBGUbWd0v+70KS5IdSjOOZcSngi8xVHnXJbL6kSwccceKqrrPBE457JaVieCvQ+SjfQHyZxz2SupiUDSuZKWS1op6ZYDTHe8pCZJVyQznnjzy6ooyM3hyCE9O3O1zjmXVpKWCCTlAvcA5wHjgamSxrcy3Y+AF5MVS2vmlVVx5NBeFOZ5i6POueyVzCuCE4CVZrbazOqBx4CLW5juK8CTwOYkxvIBjU0xFpXvYJLXDzjnslwyE8EwoCzSXx4O20vSMOBS4N4kxtGi9yp2sqehySuKnXNZL5mJoKWGeyyu/2fAzWbWdMAFSTdImiNpTmVlZYcEt/dBMk8Ezrksl5fEZZcDIyL9w4ENcdOUAo+Fjb31B86X1GhmT0cnMrP7gPsASktL45PJQZlftp0+3fMZ5S2OOueyXDITwWxgrKQxwHrgauCa6ARmNqa5W9KDwHPxSSBZ5pdVMWGEtzjqnHNJKxoys0bgRoK7gZYBj5vZEknTJE1L1noTUVPbwIrNO71YyDnnSO4VAWY2E5gZN6zFimEzuy6ZsUQtKt+BmdcPOOccZOmTxfO8otg55/bKykQwv6yKMf2LKenuLY4651zWJQIz8xZHnXMuIusSwYYdtVTWeIujzjnXLOsSwd4WRz0ROOcckI2JoGw7BXk5HDmkV6pDcc65tJCFiaCKo4b2oiAv6zbdOedalFVHw4amGIvW7/BiIeeci8iqRLB8Uw21DTFPBM45F5FViaC5xdFJI/zVlM451yzrEkHf4gJG9O2W6lCccy5tZF0imOgtjjrn3H6yJhFU1zawqtJbHHXOuXhZkwi8xVHnnGtZ1iSCgrwczjxiIBOGl6Q6FOecSytJfR9BOjl+dF+Ov65vqsNwzrm0kzVXBM4551rmicA557KcJwLnnMtyngiccy7LeSJwzrks54nAOeeynCcC55zLcp4InHMuy8nMUh1Du0iqBNYmOHl/YEsSw0mGTIs50+IFj7mzZFrMmRYvtC/mUWY2oKURGZcI2kPSHDMrTXUc7ZFpMWdavOAxd5ZMiznT4oWOi9mLhpxzLst5InDOuSzX1RPBfakO4CBkWsyZFi94zJ0l02LOtHihg2Lu0nUEzjnn2tbVrwicc861wROBc85luS6ZCCSdK2m5pJWSbkl1PM0k3S9ps6TFkWF9Jb0saUX4t09k3K3hNiyX9PEUxTxC0iuSlklaIumr6Ry3pCJJb0taEMb7nXSONy72XEnzJD2XCTFLWiNpkaT5kuZkSMwlkp6Q9G74mz45nWOWNC7cv82faklf6/CYzaxLfYBcYBVwCFAALADGpzquMLbTgcnA4siwHwO3hN23AD8Ku8eHsRcCY8Jtyk1BzEOAyWF3T+C9MLa0jBsQ0CPszgfeAk5K13jjYv8P4BHguQz5bawB+scNS/eYfw98PuwuAErSPeZI7LnAJmBUR8eckg1K8s46GXgx0n8rcGuq44rEM5r9E8FyYEjYPQRY3lLcwIvAyWkQ/zPAxzIhbqA78A5wYrrHCwwH/gacGUkE6R5zS4kgbWMGegHvE94kkwkxx8V5DvB6MmLuikVDw4CySH95OCxdDTKzjQDh34Hh8LTbDkmjgUkEZ9lpG3dYxDIf2Ay8bGZpHW/oZ8A3gVhkWLrHbMBLkuZKuiEcls4xHwJUAg+ERXC/lVRMesccdTXwaNjdoTF3xUSgFoZl4j2yabUdknoATwJfM7PqA03awrBOjdvMmsxsIsFZ9gmSjj7A5CmPV9IFwGYzm5voLC0MS8Vv41QzmwycB3xZ0ukHmDYdYs4jKJr9lZlNAnYRFKu0Jh1iBkBSAXARML2tSVsY1mbMXTERlAMjIv3DgQ0piiURFZKGAIR/N4fD02Y7JOUTJIE/mtlT4eC0j9vMqoBZwLmkd7ynAhdJWgM8Bpwp6WHSO2bMbEP4dzPwZ+AE0jvmcqA8vEIEeIIgMaRzzM3OA94xs4qwv0Nj7oqJYDYwVtKYMIteDcxIcUwHMgP4TNj9GYIy+ObhV0sqlDQGGAu83dnBSRLwO2CZmf00Miot45Y0QFJJ2N0NOBt4N13jBTCzW81suJmNJvi9/t3M/iWdY5ZULKlnczdB+fXidI7ZzDYBZZLGhYPOApaSxjFHTGVfsRB0dMypqvhIcqXK+QR3t6wC/jPV8UTiehTYCDQQZO7PAf0IKglXhH/7Rqb/z3AblgPnpSjmjxBcWi4E5oef89M1buBYYF4Y72LgtnB4WsbbQvxT2FdZnLYxE5S3Lwg/S5r/n6VzzGEME4E54e/jaaBPBsTcHdgK9I4M69CYvYkJ55zLcl2xaMg551w7eCJwzrks54nAOeeynCcC55zLcp4InHMuy3kicB1Ckkm6K9L/dUm3d9CyH5R0RUcsq431XBm2SPlK3PDRirQYm8ByLpE0/kPEMVrSNQcYtyeuRcqCg1jHdZKGHmyMrmvxROA6Sh1wmaT+qQ4kSlJuOyb/HPAlMzvjQ672EoJWIA/WaKDFRBBaZWYTI5/6g1jHdUC7EoGkvINYj8sAnghcR2kkeH/qv8ePiD+jl7Qz/DtF0j8kPS7pPUk/lPQpBe8TWCTp0Mhizpb0WjjdBeH8uZLulDRb0kJJ/xpZ7iuSHgEWtRDP1HD5iyX9KBx2G8HDc/dKujORDZb0hXDdCyQ9Kam7pFMI2oS5MzxbPzT8/CVsnO01SUdE9ssvJP2fpNWRffRD4LRw/g/sz1ZiOUfSG5LekTRdQdtQSLotjHGxpPsUuAIoBf4YrqObgncL9A/nKZU0K+y+PZzvJeCh8MntJ8NlzpZ0ajjdRyNXKPOanzp2GSIVT8r5p+t9gJ0EzfyuAXoDXwduD8c9CFwRnTb8OwWoImhGtxBYD3wnHPdV4GeR+f9CcOIyluCp7CLgBuC/wmkKCZ4YHRMudxcwpoU4hwLrgAEEjZD9HbgkHDcLKG1hntFEmg6PDO8X6b4D+Eor2/s3YGzYfSJBExLN000Pt2s8sDKyX55rZT+PBvaw7ynve4D+wKtAcTjNzex7ojr6xOkfgAtb2lYiTUoTJIlZYfftwFygW9j/CPCRsHskQdMjAM8SNEIH0APIS/Vv0j+Jf/xSz3UYM6uW9BDwbwQHq0TMtrA5XUmrgJfC4YuAaBHN42YWA1ZIWg0cQdC+zbGRM+neBImiHnjbzN5vYX3HExzkKsN1/pHghUFPJxhv1NGS7iB4uUkPgrbf9xOemZ8CTJf2NgxZGJnk6XC7lkoalOB6V1nQumrzOi4gSCSvh+soAN4IR58h6ZsEzRT0JWgO4tkE19Nshpk1f59nA+Mj29IrPPt/HfhpuD+fMrPydq7DpZAnAtfRfkbwMpgHIsMaCYshFRxBopWbdZHuWKQ/xv6/z/i2UIygyd2vmNl+B2BJUwiuCFrSUjO9B+tBgquJBZKuIziTj5cDVEUP3HGi23+wsYngvQtT9xsoFQG/JDjzL1NQeV/UyjL2fkctTBPdlzkELzqJT/Q/lPQ8QTtUb0o628zebf+muFTwOgLXocxsG/A4QcVrszXAcWH3xQSvkGyvKyXlhPUGhxA0qPUi8EUFzWQj6XAFLWEeyFvARyX1DyuSpwL/OIh4IHh158Zw/Z+KDK8Jx2HBuxvel3RlGKMkTWhjuXvnT9CbwKmSDgvX0V3S4ew7oG8Jr0yid17Fr2MN+76jyw+wrpeAG5t7JE0M/x5qZovM7EcERXRHtCN+l2KeCFwy3EVQbt3sNwQH37cJyshbO1s/kOUEB+wXgGlmVgv8lqAZ4XcU3N75a9q4yg2LoW4FXiFoOfMdM3vmQPOExkkqj3yuBP4fQWJ5maCp62aPAd8IK00PJUgSn5PU3FLnxW2sayHQGFZCt1lZHBZzXQc8KmkhQWI4woL3MfyGoJjtaYIm2ps9SFAxPl9Bc93fAX4u6TWg6QCr+zegNKycXwpMC4d/LayQXkBQLPhCW3G79OGtjzrnXJbzKwLnnMtyngiccy7LeSJwzrks54nAOeeynCcC55zLcp4InHMuy3kicM65LPf/Ad0l/y6VqY+kAAAAAElFTkSuQmCC%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Train test split</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_train</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">40000</span><span class="p">)</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">5993</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">create_test_and_train_user_item</span><span class="p">(</span><span class="n">df_train</span><span class="p">,</span> <span class="n">df_test</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    INPUT:</span>
<span class="sd">    df_train - training dataframe</span>
<span class="sd">    df_test - test dataframe</span>
<span class="sd">    </span>
<span class="sd">    OUTPUT:</span>
<span class="sd">    user_item_train - a user-item matrix of the training dataframe </span>
<span class="sd">                      (unique users for each row and unique articles for each column)</span>
<span class="sd">    user_item_test - a user-item matrix of the testing dataframe </span>
<span class="sd">                    (unique users for each row and unique articles for each column)</span>
<span class="sd">    test_idx - all of the test user ids as list</span>
<span class="sd">    test_arts - all of the test article ids as list</span>
<span class="sd">    </span>
<span class="sd">    '''</span>
    <span class="c1"># Your code here</span>
    <span class="n">user_item_train</span> <span class="o">=</span> <span class="n">create_user_item_matrix</span><span class="p">(</span><span class="n">df_train</span><span class="p">)</span>
    <span class="n">user_item_test</span> <span class="o">=</span> <span class="n">create_user_item_matrix</span><span class="p">(</span><span class="n">df_test</span><span class="p">)</span>
    <span class="n">test_idx</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">user_item_test</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
    <span class="n">test_arts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">user_item_test</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">user_item_train</span><span class="p">,</span> <span class="n">user_item_test</span><span class="p">,</span> <span class="n">test_idx</span><span class="p">,</span> <span class="n">test_arts</span>

<span class="n">user_item_train</span><span class="p">,</span> <span class="n">user_item_test</span><span class="p">,</span> <span class="n">test_idx</span><span class="p">,</span> <span class="n">test_arts</span> <span class="o">=</span> <span class="n">create_test_and_train_user_item</span><span class="p">(</span><span class="n">df_train</span><span class="p">,</span> <span class="n">df_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test_idx</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_item_test</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test_arts</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">user_item_test</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test_arts</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_item_test</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>0
574
682
0
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now use the <strong>user_item_train</strong> dataset from above to find U, S, and V transpose using SVD. Then find the subset of rows in the <strong>user_item_test</strong> dataset that you can predict using this matrix decomposition with different numbers of latent features to see how many features makes sense to keep based on the accuracy on the test data.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">u_train</span><span class="p">,</span> <span class="n">s_train</span><span class="p">,</span> <span class="n">vt_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">user_item_train</span><span class="p">)</span>
<span class="c1"># fit svd similar to above then use the cells below</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># decomposition to predict on test data</span>
<span class="c1"># CODE REFERENCE: https://github.com/nicovillena/recommendations-with-ibm/blob/master/Recommendations_with_IBM.ipynb</span>

<span class="c1"># train idx and articles</span>
<span class="n">train_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">user_item_train</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">train_arts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">user_item_train</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># intersection between test idx, articles and train idx, articles</span>
<span class="c1">#test_idx_int = np.array(set(test_idx).intersection(set(train_idx))).sort()</span>
<span class="c1">#test_arts_int = np.array(set(test_arts).intersection(set(train_arts))).sort()</span>
<span class="n">test_idx_int</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">test_idx</span><span class="p">,</span> <span class="n">train_idx</span><span class="p">)</span>
<span class="n">test_arts_int</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">test_arts</span><span class="p">,</span> <span class="n">train_arts</span><span class="p">)</span>

<span class="c1"># user and article positions of test subset in training and vice versa</span>
<span class="n">train_indexes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">in1d</span><span class="p">(</span><span class="n">train_idx</span><span class="p">,</span> <span class="n">test_idx_int</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">train_articles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">in1d</span><span class="p">(</span><span class="n">train_arts</span><span class="p">,</span> <span class="n">test_arts_int</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">test_indexes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">in1d</span><span class="p">(</span><span class="n">test_idx</span><span class="p">,</span> <span class="n">test_idx_int</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">test_articles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">in1d</span><span class="p">(</span><span class="n">test_arts</span><span class="p">,</span> <span class="n">test_arts_int</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># subset of user_item matrix containing train and test set</span>
<span class="n">u_item_test</span> <span class="o">=</span> <span class="n">user_item_test</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">test_indexes</span><span class="p">,:]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">u_item_test</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">u_item_train</span> <span class="o">=</span> <span class="n">user_item_train</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">train_indexes</span><span class="p">,</span> <span class="n">train_articles</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">u_item_train</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(20, 574)
(20, 574)
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">latent_feats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">570</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">sum_errors</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># iterate to find best number of latent_feats</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">latent_feats</span><span class="p">:</span>
    
    <span class="c1"># restructure with k latent features</span>
    <span class="n">s_new</span><span class="p">,</span> <span class="n">u_new</span><span class="p">,</span> <span class="n">vt_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">s_train</span><span class="p">[:</span><span class="n">k</span><span class="p">]),</span> <span class="n">u_train</span><span class="p">[:,</span> <span class="p">:</span><span class="n">k</span><span class="p">],</span> <span class="n">vt_train</span><span class="p">[:</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span>
    
    <span class="c1"># restructure test with k latent features</span>
    <span class="n">s_test_new</span><span class="p">,</span> <span class="n">u_test_new</span><span class="p">,</span> <span class="n">vt_test_new</span> <span class="o">=</span> <span class="n">s_new</span><span class="p">,</span> <span class="n">u_new</span><span class="p">[</span><span class="n">train_indexes</span><span class="p">,:],</span> <span class="n">vt_new</span><span class="p">[:,</span><span class="n">train_articles</span><span class="p">]</span>
    
    <span class="c1"># take dot product</span>
    <span class="n">u_item_test_set_pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">u_test_new</span><span class="p">,</span> <span class="n">s_test_new</span><span class="p">),</span> <span class="n">vt_test_new</span><span class="p">))</span>
    
    <span class="c1"># compute error for each prediction to actual value</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">u_item_test</span><span class="p">,</span> <span class="n">u_item_test_set_pred</span><span class="p">)</span>
    
    <span class="c1"># total errors and keep track of them</span>
    <span class="n">total_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">error</span><span class="p">)))</span>
    <span class="n">sum_errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">total_error</span><span class="p">)</span>
    
    
<span class="c1"># Plot</span>
<span class="n">dim</span> <span class="o">=</span> <span class="n">u_item_test</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u_item_test</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">latent_feats</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">sum_errors</span><span class="p">)</span> <span class="o">/</span> <span class="n">dim</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Number of Latent Features'</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'Accuracy'</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Accuracy vs. Number of Latent Features'</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Conclusion">
<a class="anchor" href="#Conclusion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conclusion<a class="anchor-link" href="#Conclusion"> </a>
</h2>
<p>We can see that as the number of latent feature increases, the accuracy decreases. Which is a sign of overfitting since this is a plot of the test set. This can be explained by the small number of users who have both testing and training datasets. We conclude that it is robust enough to decide if our model is ready for deployment. 
To fix this problem, we can collect more data or use regularizations. In addition we can perform an online A/B testing to measure whether rank based recommendation system or matrix recommendation performs better.
Note that our accuracy metrics may not be the best measure of our performance since it is so skewed that by just hard coding, we can correctly guess all except 20. Better metric to use may be precision/recall.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Make html notebook</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">call</span>
<span class="n">call</span><span class="p">([</span><span class="s1">'python'</span><span class="p">,</span> <span class="s1">'-m'</span><span class="p">,</span> <span class="s1">'nbconvert'</span><span class="p">,</span> <span class="s1">'Recommendations_with_IBM.ipynb'</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

</div>
</div>

</div>
    

</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="leejaeka/jaekangai"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/jaekangai/python/collaborative%20recommendation/eda/ibm/svm/matrix%20factorization/udacity/2021/01/15/Recommendations.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/jaekangai/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/jaekangai/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/jaekangai/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>❤</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/leejaeka" title="leejaeka"><svg class="svg-icon grey"><use xlink:href="/jaekangai/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/jaekang-lee" title="jaekang-lee"><svg class="svg-icon grey"><use xlink:href="/jaekangai/assets/minima-social-icons.svg#linkedin"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
